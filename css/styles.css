/*!
 * ROMA Lab â€“ styles.css
 * -----------------------------------------------------------------------------
 * Purpose: Main site stylesheet for ROMA-AI-Lab.github.io
 * Author: (kept as original project authors)
 *
 * Maintainability Notes (non-functional changes only):
 * 1) We do NOT change selectors, property values, or cascade order.
 * 2) We keep existing visual effects 100% intact.
 * 3) We add clear section banners and an index for quick navigation.
 * 4) We normalize minor whitespace and ensure consistent indentation.
 * 5) We avoid @layer / @import or any splitting that could affect cascade.
 *
 * Quick Index (search with your editor):
 * [RESET].............. Base reset & typography
 * [THEME].............. Theme tokens (dark/light) & smooth switching
 * [LAYOUT]............. Container, sections, grids
 * [GLASS].............. Glassâ€“matte tokens & placeholders
 * [MEDIA].............. Avatar / project cover
 * [HEADER]............. Sticky header / nav / drawer
 * [HERO]............... Hero section
 * [BUTTON]............. Buttons / chips / controls
 * [CARDS].............. Cards & metrics
 * [PUB]................ Publications list
 * [SCROLL]............. Vertical scroll containers (news, etc.)
 * [FOOTER]............. Footer
 * [RESPONSIVE]......... Media queries
 *
 * Z-Index reference:
 *   60  - mobile drawer
 *   59  - drawer overlay
 *   50  - sticky header
 *
 * Breakpoints reference:
 *   â‰¤1100px, â‰¤900px, â‰¤780px, â‰¤720px, â‰¤520px
 * -----------------------------------------------------------------------------
 */

/* ----- Reset / Base ----- */
*, *::before, *::after {
    box-sizing: border-box
}

html:focus-within {
    scroll-behavior: smooth
}

body {
    margin: 0;
    line-height: 1.6;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial, -apple-system, "Apple Color Emoji", "Segoe UI Emoji";
    -webkit-font-smoothing: antialiased
}

img, svg, video {
    max-width: 100%;
    display: block
}

a {
    color: inherit;
    text-decoration: none
}

/* ----- Theme tokens ----- */
:root {
    --bg: #0b1020;
    --panel: #0f172a;
    --panel-2: #121a31;
    --text: #e5e7eb;
    --muted: #94a3b8;
    --brand: #a3e635;
    --brand-2: #22d3ee;
    --ring: #a3e63544;
    --card: #0e1530;
    --shadow: 0 8px 24px rgba(2, 6, 23, .35);
    --border: #1f2a44;
    --code: #0a0f1e;
    --bg-card: color-mix(in oklab, var(--panel) 72%, white 0%); /* ç»ç’ƒæ„ŸåŸºåº• */
    --border-color: color-mix(in oklab, var(--border) 90%, transparent);
    --shadow-card: 0 4px 16px rgba(2, 6, 23, 0.28);
    --shadow-hover: 0 8px 28px rgba(20, 40, 120, 0.40);
}

.light {
    --bg: #ffffff;
    --panel: #f8fafc;
    --panel-2: #eef2f7;
    --text: #0f172a;
    --muted: #475569;
    --brand: #3b82f6;
    --brand-2: #22c55e;
    --ring: #3b82f655;
    --card: #ffffff;
    --shadow: 0 8px 24px rgba(15, 23, 42, .12);
    --border: #e5e7eb;
    --code: #0f172a;
    --bg-card: rgba(255, 255, 255, 0.72);
    --border-color: rgba(0, 0, 0, 0.08);
    --shadow-card: 0 4px 16px rgba(15, 23, 42, 0.15);
    --shadow-hover: 0 8px 24px rgba(15, 23, 42, 0.22);
}

/* Smooth theme switching */
html, body, .card, .video-card, #people-grid .card.people-card, .media-fx {
    transition: background-color .35s ease,
    color .35s ease,
    box-shadow .35s ease,
    border-color .35s ease;
}

body {
    background: var(--bg);
    color: var(--text)
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 24px
}

/* ===== Glassâ€“matte tokens ===== */
:root {
    --glass-bg: color-mix(in oklab, var(--panel) 55%, transparent);
    --glass-border: #ffffff22;
    --glass-highlight: #ffffff26;
    --glass-shadow: 0 8px 24px rgba(2, 6, 23, .25);
}

.light {
    --glass-border: #0f172a22;
    --glass-highlight: #ffffff3a;
}

/* ===== Avatars ===== */
.avatar img,
img.avatar {
    width: 100%;
    height: auto;
    object-fit: cover;
    aspect-ratio: 4/3;
    border-bottom: 1px solid var(--border);
    display: block;
}

/* glassâ€“matte avatar placeholder */
.avatar.placeholder {
    width: 100%;
    aspect-ratio: 4/3;
    position: relative;
    background: linear-gradient(180deg, var(--glass-bg), color-mix(in oklab, var(--panel-2) 85%, transparent));
    border-bottom: 1px solid var(--glass-border);
    box-shadow: var(--glass-shadow) inset 0 1px 0 var(--glass-highlight);
    backdrop-filter: blur(10px) saturate(120%);
    -webkit-backdrop-filter: blur(10px) saturate(120%);
}

.avatar.placeholder::after {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, .12), rgba(255, 255, 255, 0) 40%);
    pointer-events: none;
}

/* ===== Project cover (NEW, for project cards & gallery) ===== */
.project-cover {
    width: 100%;
    aspect-ratio: 16/9;
    object-fit: cover;
    border-bottom: 1px solid var(--border);
    display: block;
}

.project-cover.placeholder {
    position: relative;
    background: linear-gradient(180deg, var(--glass-bg), color-mix(in oklab, var(--panel-2) 85%, transparent));
    border-bottom: 1px solid var(--glass-border);
    box-shadow: var(--glass-shadow) inset 0 1px 0 var(--glass-highlight);
    backdrop-filter: blur(10px) saturate(120%);
    -webkit-backdrop-filter: blur(10px) saturate(120%);
}

/* ----- Header / Nav ----- */
header.site-header {
    position: sticky;
    top: 0;
    z-index: 50;
    backdrop-filter: blur(8px);
    background: color-mix(in oklab, var(--panel) 90%, transparent);
    border-bottom: 1px solid var(--border)
}

.nav {
    display: flex;
    align-items: center;
    gap: 16px;
    justify-content: space-between;
    padding: 14px 0
}

.brand {
    display: flex;
    align-items: center;
    gap: 12px;
    font-weight: 700
}

.brand svg {
    width: 28px;
    height: 28px
}

.nav-links-inline {
    display: flex;
    gap: 8px;
    flex-wrap: wrap
}

/* FIX: ç»™æ¡Œé¢ç«¯å¯¼èˆªåŠ ç±»å */
.nav-links-inline a {
    padding: 8px 12px;
    border-radius: 999px;
    border: 1px solid transparent;
    color: var(--muted)
}

.nav-links-inline a.active, .nav-links-inline a:hover {
    color: var(--text);
    border-color: var(--border);
    background: var(--panel-2)
}

.controls {
    display: flex;
    gap: 8px;
    align-items: center;
    padding-right: max(10px, env(safe-area-inset-right));
}

/* FIX: å³ä¾§å®‰å…¨ç•™ç™½ */
.btn, button, .chip {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    border-radius: 12px;
    border: 1px solid var(--border);
    padding: 10px 14px;
    background: var(--panel);
    color: var(--text);
    cursor: pointer
}

.btn.primary {
    background: linear-gradient(135deg, var(--brand), var(--brand-2));
    color: #0b1020;
    border: 0
}

.btn.ghost {
    background: transparent
}

.btn:focus-visible {
    outline: 2px solid var(--ring);
    outline-offset: 2px
}

/* ç§»åŠ¨ç«¯ menu æŒ‰é’®æ›´é å·¦ä¸€ç‚¹ï¼Œé¿å…è¢«æ»šåŠ¨æ¡æŒ¡ä½ */
#menu {
    display: none;
    margin-right: 12px;
}

/* FIX */
@media (max-width: 720px) {
    #menu {
        display: inline-flex;
    }
}

/* ----- Mobile drawer (NEW) ----- */
/*.nav-drawer {*/
/*    position: fixed;*/
/*    top: 0;*/
/*    right: 0;*/
/*    bottom: 0;*/
/*    width: min(86vw, 360px);*/
/*    background: var(--panel);*/
/*    border-left: 1px solid var(--border);*/
/*    transform: translateX(100%);*/
/*    transition: transform .25s ease;*/
/*    z-index: 60;*/
/*    display: flex;*/
/*    flex-direction: column;*/
/*    padding: 16px*/
/*}*/

.nav-drawer {
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    height: 100vh;
    width: 56%;
    max-width: 380px; /* ä¿æŒæ¡Œé¢ç«¯ä¸å¤ªå®½ */
    /*width: min(86vw, 360px);*/
    box-shadow: var(--shadow-lg);
    background: var(--panel);
    border-left: 1px solid var(--border);
    transform: translateX(100%);
    /*transition: transform .25s ease;*/
    transition: transform 0.35s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 60;
    display: flex;
    flex-direction: column;
    padding: 16px;
    border-radius: 12px 0 0 12px; /* å°åœ†è§’æ›´åƒåŸç”ŸæŠ½å±‰ */
}

.nav-drawer .title {
    font-weight: 700;
    margin-bottom: 10px
}

.nav-drawer a {
    padding: 10px 12px;
    border-radius: 10px;
    border: 1px solid var(--border);
    background: var(--panel-2);
    color: var(--text);
    margin-bottom: 8px
}

.nav-drawer a.active {
    font-weight: 600;
    border-color: var(--border);
    background: var(--panel-3);
}


.nav-drawer .spacer {
    flex: 1
}

.nav-drawer .footer {
    display: flex;
    gap: 8px;
    flex-wrap: wrap
}

.nav-drawer.show {
    transform: none
}

.nav-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, .45);
    opacity: 0;
    visibility: hidden;
    transition: opacity .2s ease;
    z-index: 59;
    backdrop-filter: none;
}

/* FIX: å»æ‰å¼ºæ¨¡ç³Šï¼ŒåªåšåŠé€æ˜é®ç½© */
.nav-overlay.show {
    opacity: 1;
    visibility: visible
}

/* ----- Hero ----- */
.hero {
    position: relative;
    overflow: hidden;
    background: radial-gradient(1200px 600px at 50% -10%, color-mix(in oklab, var(--brand) 18%, transparent) 0%, transparent 60%),
    linear-gradient(180deg, var(--panel), var(--bg));
    border-bottom: 1px solid var(--border)
}

.hero-wrap {
    padding: 72px 0 48px;
    display: grid;
    grid-template-columns:1.2fr .8fr;
    gap: 24px
}

@media (max-width: 900px) {
    .hero-wrap {
        grid-template-columns:1fr
    }
}

.badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    border: 1px solid var(--border);
    border-radius: 999px;
    padding: 6px 10px;
    color: var(--muted);
    background: var(--panel-2)
}

.title {
    font-size: clamp(28px, 4vw, 44px);
    line-height: 1.2;
    margin: 12px 0 8px
}

.subtitle {
    color: var(--muted);
    max-width: 60ch
}

.hero-card {
    background: linear-gradient(180deg, var(--panel-2), var(--panel));
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 18px;
    box-shadow: var(--shadow)
}

.hero-actions {
    margin-top: 18px;
    display: flex;
    gap: 10px;
    flex-wrap: wrap
}

.hero-grid {
    display: grid;
    grid-template-columns:repeat(3, 1fr);
    gap: 12px
}

@media (max-width: 700px) {
    .hero-grid {
        grid-template-columns:1fr 1fr
    }
}

.metric {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 14px
}

.metric .k {
    font-size: 24px;
    font-weight: 800
}

.metric .k sub {
    font-size: 12px;
    color: var(--muted);
    margin-left: 4px
}

/* ----- Sections ----- */
section {
    padding: 64px 0;
    border-bottom: 1px solid var(--border)
}

section:last-of-type {
    border-bottom: 0
}

.section-head {
    display: flex;
    align-items: end;
    justify-content: space-between;
    gap: 12px;
    margin-bottom: 24px;
    flex-wrap: wrap
}

.section-head h2 {
    font-size: clamp(22px, 3vw, 32px);
    margin: 0
}

.section-desc {
    color: var(--muted);
    max-width: 75ch
}

/* ----- Cards & Grids (default) ----- */
.grid {
    display: grid;
    gap: 16px
}

.grid.people {
    grid-template-columns:repeat(4, 1fr)
}

.grid.research {
    grid-template-columns:repeat(3, 1fr)
}

.grid.pub {
    grid-template-columns:1fr
}

@media (max-width: 1100px) {
    .grid.people {
        grid-template-columns:repeat(3, 1fr)
    }

    .grid.research {
        grid-template-columns:repeat(2, 1fr)
    }
}

@media (max-width: 780px) {
    .grid.people {
        grid-template-columns:repeat(2, 1fr)
    }
}

@media (max-width: 520px) {
    .grid.people {
        grid-template-columns:1fr
    }

    .grid.research {
        grid-template-columns:1fr
    }
}

.card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 16px;
    overflow: hidden;
    box-shadow: var(--shadow)
}

.card .body {
    padding: 16px
}

.card .meta {
    color: var(--muted);
    font-size: 14px
}

/* ç»Ÿä¸€æŒ‰é’®è¡Œé«˜åº¦ï¼Œç¡®ä¿ Email / Profile å¯¹é½ï¼ˆFIXï¼‰ */
.actions-row {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    margin-top: 10px;
    align-items: center;
    min-height: 42px
}

/* ----- Publication (no thumbnails on home) ----- */
.pub-item {
    display: grid;
    grid-template-columns:1fr auto;
    gap: 12px;
    padding: 14px;
    border: 1px solid var(--border);
    border-radius: 14px;
    background: var(--panel)
}

.pub-item .title {
    font-weight: 700
}

.pub-item .authors, .pub-item .venue {
    color: var(--muted);
    font-size: 14px
}

.pub-actions {
    display: flex;
    gap: 8px;
    align-items: center
}

.pub-actions .btn {
    padding: 8px 10px;
    border-radius: 10px
}

.bibtex {
    display: none;
    margin-top: 8px;
    padding: 10px;
    border-radius: 10px;
    background: #020617;
    color: #e5e7eb;
    overflow: auto
}

.light .bibtex {
    background: #0f172a;
    color: #e5e7eb
}

/* ----- Scroll containers ----- */
.v-scroll {
    max-height: 520px;
    overflow: auto;
    padding-right: 4px
}

#news-list {
    list-style: none;
    margin: 0;
    padding: 0;
    display: grid;
    gap: 10px
}

.news-card .body {
    display: flex;
    gap: 10px;
    align-items: flex-start
}

.news-date {
    flex: 0 0 auto;
    font-size: 12px;
    color: var(--muted);
    border: 1px solid var(--border);
    border-radius: 999px;
    padding: 4px 8px;
    background: var(--panel-2)
}

.news-text {
    flex: 1
}

.news-text a {
    text-decoration: underline;
    text-underline-offset: 2px;
}

.news-text a:hover,
.news-text a:focus-visible {
    text-decoration-thickness: 2px;
}



/* ----- Footer ----- */
footer {
    padding: 36px 0;
    color: var(--muted)
}

.foot {
    display: flex;
    gap: 16px;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap
}

.foot-left {
    display: flex;
    gap: 10px;
    align-items: center
}

.foot-links {
    display: flex;
    gap: 12px;
    flex-wrap: wrap
}

/* Footer å¤‡æ¡ˆå›¾æ ‡ï¼šç¼©æˆâ€œè¡¨æƒ…åŒ…â€å¤§å°å¹¶ä¸æ–‡å­—å¯¹é½ */
footer .foot-left small {
    display: inline-flex;
    align-items: center;
    gap: 4px;
}

footer .foot-left small img {
    width: 1.1em;     /* å’Œæ–‡å­—é«˜åº¦æ¥è¿‘ */
    height: 1.1em;
    object-fit: contain;
    vertical-align: middle;
}


/* ----- Utilities ----- */
:focus-visible {
    outline: 2px solid var(--ring);
    outline-offset: 2px;
    border-radius: 8px
}

.hidden {
    display: none !important
}

.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0
}

/* ---------- Markdown prose (for custom .md sections) ---------- */
.prose {
    margin-top: 16px;
    line-height: 1.7;
}

/* ---------- Person detail markdown enhancement ---------- */

/* æ•´ä½“å®½åº¦ & å±…ä¸­ï¼šæ­£æ–‡æ›´åƒä¸€ç¯‡ä¼˜é›…çš„ä¸ªäººé¡µé¢ */
#person-detail-body .person-prose {
    max-width: 720px;
    margin: 0 auto;
}

/* é¡¶éƒ¨å¤§æ ‡é¢˜ï¼ˆğŸ‘¤ Dr. ...ï¼‰ç¨å¾®æ‹‰å¼€ä¸€ç‚¹æ°”å£ */
#person-detail-body .person-prose h1 {
    margin-top: 0;
    margin-bottom: 0.4em;
}

/* H2 æ ‡é¢˜ï¼ˆå¸¦ emojiï¼‰ï¼Œåšä¸€æ¡å¾ˆè½»çš„åº•çº¿ï¼Œæ–¹ä¾¿æ‰«è¯»å„ section */
#person-detail-body .person-prose h2 {
    margin-top: 1.6em;
    margin-bottom: 0.6em;
    padding-bottom: 0.3em;
    border-bottom: 1px solid color-mix(in oklab, var(--border) 80%, transparent);
}

/* H3 ç¨å¾®ç´§å‡‘ä¸€ç‚¹ï¼Œç”¨äº â€œInfluence Highlightsâ€ è¿™ç±»å‰¯æ ‡é¢˜ */
#person-detail-body .person-prose h3 {
    margin-top: 1.2em;
    margin-bottom: 0.4em;
}

/* é¡¶éƒ¨ç¬¬ä¸€æ®µç®€ä»‹ç¨å¾®æ”¶ä¸€ç‚¹é¢œè‰²å’Œå­—å·ï¼Œçœ‹èµ·æ¥åƒ intro */
#person-detail-body .person-prose > p:first-of-type {
    color: var(--muted);
    font-size: 0.95rem;
}

/* åˆ—è¡¨æ›´ç´§å‡‘ï¼Œä½†ä¿æŒè‰¯å¥½å¯è¯»æ€§ */
#person-detail-body .person-prose ul,
#person-detail-body .person-prose ol {
    margin: 0.4em 0 0.8em;
    padding-left: 1.2em;
}

/* å°åœ†ç‚¹åˆ—è¡¨æ¸…æ™°ä¸€ç‚¹ */
#person-detail-body .person-prose ul {
    list-style: disc;
}

/* Awards é‚£é¦–å°è¯—çš„åŒºå—æ ·å¼ */
#person-detail-body .person-prose blockquote {
    margin: 1.2em 0;
    padding: 12px 14px;
    border-radius: 12px;
    border-left: 3px solid var(--brand);
    background: color-mix(in oklab, var(--panel-2) 85%, transparent);
    color: var(--muted);
}

/* äº®è‰²ä¸»é¢˜ä¸‹ç¨å¾®æŠ¬ä¸€ç‚¹äº®åº¦ï¼Œä¿æŒè½»ç›ˆ */
.light #person-detail-body .person-prose blockquote {
    background: color-mix(in oklab, var(--panel-2) 70%, white 15%);
}

/* å¼•ç”¨é‡Œçš„å¤šè¡Œæ–‡æœ¬ï¼ˆå¸¦ <br/>ï¼‰æ›´ç´§å‡‘ä¸€ç‚¹ */
#person-detail-body .person-prose blockquote p {
    margin: 0;
    line-height: 1.6;
}

/* å¼•ç”¨é‡Œç¬¬ä¸€è¡Œï¼ˆğŸ‡ Awards and Honorsï¼‰ç¨å¾®åŠ ä¸€ç‚¹æƒé‡ */
#person-detail-body .person-prose blockquote p br + text {
    font-weight: 600;
}

/* åˆ†éš”çº¿ï¼ˆ---ï¼‰åœ¨ä¸ªäººé¡µæ”¶çª„ä¸€ç‚¹ */
#person-detail-body .person-prose hr {
    margin: 1.2em 0;
    border-top-style: dashed;
}

/* é“¾æ¥ä¸‹åˆ’çº¿ç¨å¾®æŸ”ä¸€ç‚¹ */
#person-detail-body .person-prose a {
    text-decoration: underline;
    text-underline-offset: 2px;
}

#person-detail-body .person-prose blockquote {
    position: relative;
}

#person-detail-body .person-prose blockquote::after {

    position: absolute;
    right: 12px;
    bottom: 8px;
    font-size: 0.75rem;
    color: var(--muted);
    opacity: 0.8;
    font-style: italic;
}



.prose h1, .prose h2, .prose h3, .prose h4 {
    margin: 1.2em 0 .5em;
    line-height: 1.3
}

.prose h1 {
    font-size: clamp(22px, 3vw, 28px)
}

.prose h2 {
    font-size: clamp(20px, 2.6vw, 24px)
}

.prose h3 {
    font-size: clamp(18px, 2.2vw, 20px)
}

.prose p {
    margin: .6em 0;
    color: var(--text)
}

.prose a {
    color: inherit;
    text-decoration: underline
}

.prose ul, .prose ol {
    padding-left: 1.2em;
    margin: .6em 0
}

.prose li {
    margin: .25em 0
}

.prose img {
    max-width: 100%;
    border: 1px solid var(--border);
    border-radius: 12px;
    margin: .6em 0
}

.prose code {
    font-family: ui-monospace, Menlo, Consolas, monospace;
    background: var(--panel-2);
    padding: .15em .4em;
    border-radius: 6px;
    border: 1px solid var(--border)
}

.prose pre.code {
    background: var(--panel-2);
    border: 1px solid var(--border);
    padding: 12px;
    border-radius: 12px;
    overflow: auto
}

.prose hr {
    border: 0;
    border-top: 1px solid var(--border);
    margin: 1em 0
}

/* æ ‡ç­¾å®¹å™¨ä¸èƒ¶å›Šæ ·å¼ */
.tags {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    margin-top: 10px
}

.tag {
    font-size: 12px;
    padding: 6px 8px;
    border: 1px solid var(--border);
    border-radius: 999px;
    color: var(--muted);
    background: var(--panel)
}

.pub-actions a[href=""] {
    opacity: .5;
    pointer-events: none;
}

/* é¦–é¡µ publication åŒºå—ï¼ˆä¾‹å¦‚ #pub-list åœ¨é¦–é¡µï¼‰ */
#pub-list .pub-item .title {
    font-size: 0.95rem;
}

/* ç‹¬ç«‹é¡µï¼ˆpages/publications.htmlï¼‰ */
#pub-all-list .pub-item .title {
    font-size: 1rem;
}

@media (max-width: 768px) {
    .pub-item .title {
        font-size: 0.9rem;
    }
}

/* --- Mobile-first header defaults (prevent FOUC) --- */
@media (max-width: 720px) {
    /* éšè—æ¡Œé¢å†…è”å¯¼èˆªï¼Œé¦–å±å°±ä¸å‡ºç° */
    .nav-links-inline {
        display: none !important;
    }

    /* æ˜¾ç¤ºæ±‰å ¡æŒ‰é’®ï¼ˆå¦‚æœä¸Šé¢å·²æœ‰åŒåè§„åˆ™å¯ä¿ç•™ï¼Œè¿™é‡Œæ˜¯å…œåº•ï¼‰ */
    #menu {
        display: inline-flex !important;
    }

    /* å“ç‰Œåä¸æ¢è¡Œï¼Œé¿å…è¢«æŒ¤æˆä¸¤è¡Œ */
    .brand span {
        white-space: nowrap;
    }

    /* å¤´éƒ¨é—´è·åœ¨ç§»åŠ¨ç«¯ç¨å¾®ç´§å‡‘ä¸€ç‚¹ï¼Œé¿å…æŒ¤å‹ */
    .nav {
        gap: 10px;
    }
}

/* iOS å®‰å…¨åŒºå¢å¼ºï¼šä»…åœ¨æœ‰åˆ˜æµ·è®¾å¤‡ä¸Šèµ·ä½œç”¨ï¼Œå…¶ä»–è®¾å¤‡å€¼ä¸º 0 */
header.site-header {
    padding-top: max(0px, env(safe-area-inset-top));
}

header.site-header .nav {
    padding-left: max(16px, env(safe-area-inset-left));
    padding-right: max(16px, env(safe-area-inset-right));
}

/* ä½ çš„ .controls é‡Œå·²ç»å¤„ç†äº†å³ä¾§ï¼›è¿™é‡Œè¡¥é½å·¦ä¾§å…œåº•ï¼ˆå¯é€‰ï¼‰ */
.controls {
    padding-left: max(10px, env(safe-area-inset-left));
}

/* ç§»åŠ¨ç«¯æŠ½å±‰çš„å†…è¾¹è·ä¹Ÿè·Ÿéšå®‰å…¨åŒºï¼ˆå¯é€‰ï¼Œæ‰‹æ„Ÿæ›´å¥½ï¼‰ */
.nav-drawer {
    padding-left: max(16px, env(safe-area-inset-left));
    padding-right: max(16px, env(safe-area-inset-right));
    padding-top: calc(16px + env(safe-area-inset-top, 0px));
}

/* é˜²æ»šåŠ¨é“¾è·¯ç©¿é€ï¼šèƒŒæ™¯å±‚ä¸æŠŠæ»šåŠ¨å†’æ³¡åˆ°é¡µé¢ */
html, body {
    overscroll-behavior: contain;
}

/* æŠ½å±‰ & é®ç½©é¿å…è¯¯è§¦èƒŒæ™¯ */
.nav-overlay {
    touch-action: none;
}

.nav-drawer {
    overscroll-behavior: contain;
}

/* --- Publications: mobile layout fix --- */
@media (max-width: 720px) {
    /* 1) å¡ç‰‡æ”¹ä¸ºä¸Šä¸‹å¸ƒå±€ï¼ŒæŒ‰é’®æ”¾åˆ°æ–‡å­—ä¸‹é¢ */
    .pub-item {
        grid-template-columns: 1fr !important;
        align-items: start;
        gap: 10px;
    }

    .pub-actions {
        justify-content: flex-start;
    }

    /* 2) æ ‡é¢˜å°ä¸€å·ä¸”é¿å…å¥‡æ€ªæ–­å­— */
    #pub-list .pub-item .title,
    #pub-all-list .pub-item .title {
        font-size: 0.95rem !important;
        line-height: 1.35;
        word-break: keep-all; /* ä¼˜å…ˆæ•´è¯æ¢è¡Œ */
        overflow-wrap: anywhere; /* å®åœ¨å¤ªé•¿å†å¼ºåˆ¶æ¢ */
    }

    /* 3) æŒ‰é’®è§¦æ§å°ºå¯¸é€‚é… */
    .pub-actions .btn {
        padding: 8px 10px;
        border-radius: 10px;
    }
}

/* --- Form controls: dark theme styling --- */
input[type="search"],
select {
    background: var(--panel-2);
    color: var(--text);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 8px 10px;
    outline: none;
}

input[type="search"]::placeholder {
    color: var(--muted);
}

input[type="search"]:focus,
select:focus {
    outline: 2px solid var(--ring);
    outline-offset: 1px;
}

@media (max-width: 720px) {
    .filters-mobile summary {
        padding: 8px 10px;
        border: 1px solid var(--border);
        border-radius: 10px;
        background: var(--panel-2)
    }

    .filters-mobile[open] {
        padding: 8px;
        border: 1px solid var(--border);
        border-radius: 12px;
        background: var(--panel)
    }

    .filters-mobile > *:not(summary) {
        margin-top: 8px;
        display: block
    }

    .filters-mobile input, .filters-mobile select {
        width: 100%
    }
}

@media (max-width: 720px) {
    .hero-wrap {
        padding: 56px 0 36px
    }

    .subtitle {
        max-width: 100%
    }
}

/* ========= Auto Hero Top Gap (è‡ªé€‚åº”å¯¼èˆªé«˜åº¦) ========= */

/* é»˜è®¤å˜é‡å€¼ */
:root {
    --hero-top-gap: 48px; /* æ¡Œé¢ç«¯èˆ’é€‚ç•™ç™½ */
}

/* hero ä½¿ç”¨è¿™ä¸ªå˜é‡æ§åˆ¶ä¸Šè¾¹è· */
.hero-wrap {
    padding-top: var(--hero-top-gap);
}

/* æ‰‹æœºé»˜è®¤æ›´ç´§å‡‘ï¼ŒJS ä¼šå†åŠ¨æ€è¦†ç›– */
@media (max-width: 720px) {
    :root {
        --hero-top-gap: 24px;
    }
}

/* ========= Header Safe-Area Enhancementï¼ˆiOS åˆ˜æµ·/åœ†è§’ï¼‰ ========= */
/* è¯´æ˜ï¼š
   - åœ¨æœ‰å®‰å…¨åŒºçš„è®¾å¤‡ï¼ˆiPhone åˆ˜æµ·/åŠ¨æ€å²›ï¼‰ä¸Šï¼Œenv(safe-area-inset-*) ä¼šè¿”å› >0 çš„å€¼ï¼›
   - å…¶å®ƒè®¾å¤‡å€¼ä¸º 0ï¼Œä¸ä¼šæ”¹å˜åŸæœ‰å¸ƒå±€ã€‚ */

header.site-header {
    /* é¡¶éƒ¨è®©å‡ºå®‰å…¨åŒºï¼Œé¿å…è¢«é®æŒ¡ */
    padding-top: max(0px, env(safe-area-inset-top));
}

/* å¤´éƒ¨å·¦å³ä¹Ÿè®©å‡ºå®‰å…¨åŒºï¼Œä¿è¯ GitHub/èœå•ä¸è´´è¾¹ */
header.site-header .nav {
    padding-left: max(16px, env(safe-area-inset-left));
    padding-right: max(16px, env(safe-area-inset-right));
}

/* ä½ çš„ .controls åŸæœ¬åªåšäº†å³ä¾§å®‰å…¨ç•™ç™½ï¼Œè¿™é‡Œè¡¥é½å·¦ä¾§å…œåº•ï¼ˆä¸ä¸åŸæœ‰è§„åˆ™å†²çªï¼‰ */
.controls {
    padding-left: max(10px, env(safe-area-inset-left));
    padding-right: max(10px, env(safe-area-inset-right));
}

/* ç§»åŠ¨ç«¯æŠ½å±‰åŒæ ·å°Šé‡å®‰å…¨åŒºï¼ˆè§¦æ§æ›´èˆ’æœï¼‰ */
.nav-drawer {
    padding-left: max(16px, env(safe-area-inset-left));
    padding-right: max(16px, env(safe-area-inset-right));
    padding-top: calc(16px + env(safe-area-inset-top, 0px));
}

/* ========= Auto Hero Top Gapï¼ˆè‡ªé€‚åº”å¯¼èˆªé«˜åº¦ï¼‰ ========= */
:root {
    --hero-top-gap: 48px; /* æ¡Œé¢ç«¯é»˜è®¤çš„èˆ’é€‚ç•™ç™½ */
}

/* è®© hero çœŸæ­£ä½¿ç”¨å˜é‡ä½œä¸ºé¡¶éƒ¨å†…è¾¹è· */
.hero-wrap {
    padding-top: var(--hero-top-gap);
}

/* æ‰‹æœºåˆå§‹æ›´ç´§å‡‘ï¼ˆJS ä¼šè¦†ç›–ä¸º headerHeight+8pxï¼‰ */
@media (max-width: 720px) {
    :root {
        --hero-top-gap: 24px;
    }
}

.btn, button, .chip {
    min-height: 44px;
}

/* ---- Back-to-top (mobile + desktop) ---- */
#to-top {
    position: fixed;
    right: clamp(16px, 2vw, 28px);
    bottom: clamp(18px, 3vh, 32px);
    z-index: 1000; /* ç•¥é«˜ä¸€ç‚¹ï¼Œé¿å…è¢«å†…å®¹è¦†ç›– */
    box-shadow: var(--shadow);
    min-width: 44px; /* æ›´å¥½çš„å‘½ä¸­é¢ç§¯ */
    min-height: 44px;
    padding: 0 12px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 12px;
    opacity: .95;
    transition: transform .15s ease, opacity .15s ease;
}

#to-top:hover {
    transform: translateY(-1px);
}

/* æ‰‹æœºç«¯ä¿æŒæ›´é å†…çš„è¾¹è·ï¼ˆé¿å…å’Œæ‰‹åŠ¿å†²çªï¼‰ */
@media (max-width: 720px) {
    #to-top {
        right: 16px;
        bottom: 18px;
    }
}

/*!* ---- Back-to-top (mobile only) ---- *!*/
/*#to-top {*/
/*    position: fixed;*/
/*    right: 16px;*/
/*    bottom: 18px;*/
/*    z-index: 70; !* é«˜äºå†…å®¹ï¼Œä½äºæŠ½å±‰(60)æ²¡å…³ç³»ï¼›è‹¥éœ€æµ®åœ¨æŠ½å±‰ä¸Šå¯è°ƒåˆ° 80+ *!*/
/*    box-shadow: var(--shadow);*/
/*}*/

/*@media (min-width: 721px) {*/
/*    #to-top {*/
/*        display: none;*/
/*    }*/

/*    !* ä»…æ‰‹æœºæ˜¾ç¤º *!*/
/*}*/

/* ===== Lightbox (dialog) ===== */
dialog.lightbox {
    padding: 0;
    border: 0;
    /* è®© dialog è‡ªèº«å…¨å±ï¼Œåªåšå®¹å™¨ï¼›ç”¨ flex å±…ä¸­æ‰¿è½½å›¾ç‰‡ */
    width: 100vw;
    height: 100vh;
    max-width: none;
    max-height: none;
    background: transparent;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* èƒŒæ™¯è’™å±‚ */
dialog.lightbox::backdrop {
    background: rgba(0, 0, 0, .72);
    backdrop-filter: blur(2px);
}

/* é¢„è§ˆå¤§å›¾ï¼šæ¡Œé¢ä¸å†çœŸæ­£â€œæ»¡å±â€ï¼Œç»™å‡ºè¾¹è·æ–¹ä¾¿ç‚¹å‡»å…³é—­ */
dialog.lightbox img {
    max-width: min(96vw, 1600px);
    max-height: 92vh;
    border-radius: 12px;
    box-shadow: 0 12px 36px rgba(0, 0, 0, .45);
    cursor: zoom-out; /* å‘Šè¯‰ç”¨æˆ·â€œå†ç‚¹ä¸€ä¸‹å°±ç¼©å›â€ */
}

/* ç¼©ç•¥å›¾å¯é€‰ï¼šæç¤ºå¯æ”¾å¤§ */
#life-grid img.project-cover {
    cursor: zoom-in;
}

/* ======== Video Wall ======== */
.grid.videos {
    display: grid;
    gap: 16px;
    grid-template-columns: repeat(3, 1fr);
}

@media (max-width: 1100px) {
    .grid.videos {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 640px) {
    .grid.videos {
        grid-template-columns: 1fr;
    }
}

.video-card .body {
    padding: 12px 14px;
}

.video-title {
    font-weight: 700;
    line-height: 1.35;
}

.video-meta {
    margin-top: 6px;
    font-size: 12px;
    color: var(--muted);
}

.video-ctas {
    margin-top: 8px;
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

/* 16:9 å°é¢å ä½ + ç»ç’ƒç£¨ç ‚èƒŒæ™¯ */
.video-embed {
    background: var(--panel-2);
    border-bottom: 1px solid var(--border);
    position: relative;
}

.video-cover {
    width: 100%;
    aspect-ratio: 16 / 9;
    background-size: cover;
    background-position: center;
    border-bottom: 1px solid var(--border);
    border-top-left-radius: inherit;
    border-top-right-radius: inherit;
    position: relative;
}

/* Play æŒ‰é’®ï¼ˆåœ†å½¢ï¼Œå±…ä¸­ï¼‰ */
.video-play {
    position: absolute;
    inset: 0;
    margin: auto;
    width: 60px;
    height: 60px;
    border-radius: 9999px;
    border: 0;
    background: color-mix(in oklab, var(--panel) 70%, black 10%);
    display: grid;
    place-items: center;
    cursor: pointer;
    box-shadow: var(--shadow);
}

.video-play svg {
    fill: white;
}

.video-play:focus-visible {
    outline: 2px solid var(--primary);
    outline-offset: 2px;
}

.video-card:hover .video-play {
    transform: scale(1.05);
    transition: transform .15s ease;
}

/* çœŸæ­£çš„ iframeï¼šä¿æŒ 16:9 */
.video-iframe {
    width: 100%;
    aspect-ratio: 16 / 9;
    height: auto;
    display: block;
    border: 0;
}

/* é™çº§æç¤º */
.video-fallback {
    padding: 16px;
    text-align: center;
}

.video-fallback p {
    margin: 0 0 8px;
}

/* æ‚¬æµ®åé¦ˆ */
.video-card:hover {
    box-shadow: var(--shadow);
    transform: translateY(-1px);
    transition: transform .15s ease, box-shadow .15s ease;
}

/* sentinelï¼ˆå¢é‡æ¸²æŸ“ç”¨ï¼Œå ä½å¾ˆå°ï¼‰ */
.video-sentinel {
    height: 1px;
    visibility: hidden;
}

.video-cover:hover {
    transform: scale(1.03) translateY(-2px);
    filter: brightness(1.1);
    transition: transform 0.35s ease, filter 0.35s ease;
}

.video-play svg {
    animation: pulse 2s infinite ease-in-out;
}

@keyframes pulse {
    0%, 100% {
        opacity: 0.8;
        transform: scale(1);
    }
    50% {
        opacity: 1;
        transform: scale(1.1);
    }
}

/* Video card â€“ theme-adaptive */
.video-card {
    background: var(--bg-card);
    backdrop-filter: blur(20px) saturate(115%);
    border: 1px solid var(--border-color);
    border-radius: 16px;
    box-shadow: var(--shadow-card);
    transition: box-shadow .3s ease, transform .3s ease, background-color .3s ease, border-color .3s ease;
}

.video-card:hover {
    box-shadow: var(--shadow-hover);
    transform: translateY(-4px);
}

.video-title::after {
    content: '';
    display: block;
    height: 2px;
    width: 40%;
    margin-top: 6px;
    background: linear-gradient(90deg, #00e0ff, transparent);
}

/* === Cinematic View === */
#cinematic-overlay {
    position: fixed;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 999;
    backdrop-filter: blur(12px);
    background: rgba(0, 0, 0, 0.7);
    transition: opacity 0.4s ease;
    opacity: 0;
}

#cinematic-overlay.active {
    display: flex;
    opacity: 1;
}

.cinematic-player {
    position: relative;
    width: 90%;
    max-width: 500px;
    aspect-ratio: 16/9;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 8px 40px rgba(0, 0, 0, 0.6);
    animation: zoomIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}


/* iframe æœ¬èº« */
#cinematic-iframe {
    position: relative;
    z-index: 1;           /* åœ¨ loading ä¸‹é¢ */
    width: 100%;
    height: 100%;
    border: none;
    background: #000;
    transition: opacity 0.2s ease;
}

/* è¦†ç›–åœ¨ iframe ä¸Šçš„æç¤ºå±‚ */
.cinematic-loading {
    position: absolute;
    inset: 0;
    z-index: 2;           /* æ˜ç¡®å‹åœ¨ iframe ä¸Š */
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1.5rem;
    text-align: center;
    font-size: 0.95rem;
    line-height: 1.6;
    color: #e5e7eb;
    background: radial-gradient(circle at 20% 20%, rgba(255,255,255,0.08), transparent 55%);
    backdrop-filter: blur(2px);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.25s ease;
}

/* overlay å¤„äº loading çŠ¶æ€æ—¶ï¼šæ˜¾ç¤ºæç¤ºï¼Œç•¥å‹ä½ iframe äº®åº¦ */
#cinematic-overlay.loading .cinematic-loading {
    opacity: 1;
}

#cinematic-overlay.loading #cinematic-iframe {
    opacity: 0.25;
}

.cinematic-close {
    position: absolute;
    top: 10px;
    right: 16px;
    font-size: 2rem;
    color: #fff;
    background: transparent;
    border: none;
    cursor: pointer;
    z-index: 1001;
    transition: transform 0.2s ease;
}

.cinematic-close:hover {
    transform: scale(1.2);
}

@keyframes zoomIn {
    from {
        transform: scale(0.8);
        opacity: 0;
    }
    to {
        transform: scale(1);
        opacity: 1;
    }
}

/* ===== Global media effect (People first) ===== */
/* Theme-adaptive media frame */
.media-fx {
    position: relative;
    border-radius: 16px;
    overflow: hidden;
    background: var(--bg-card);
    backdrop-filter: blur(16px) saturate(115%);
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-card);
    transform: translateZ(0);
}

.media-fx:hover {
    box-shadow: var(--shadow-hover);
}

.media-fx > img { /* åŒ…è£¹åçš„ img ä¿ç•™åŸè£åˆ‡ */
    display: block;
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform .45s cubic-bezier(.2, .8, .2, 1), filter .45s ease;
}

.media-fx:hover > img {
    transform: scale(1.035);
    filter: contrast(1.04) saturate(1.02) brightness(1.02);
}

/* æŸ”å…‰éšé¼ æ ‡ç§»åŠ¨ï¼ˆç”± JS è®¾ç½® --mx/--myï¼‰ */
.media-fx::after {
    content: "";
    position: absolute;
    inset: -20%;
    pointer-events: none;
    background: radial-gradient(120px 120px at var(--mx, 50%) var(--my, 50%),
    color-mix(in oklab, var(--brand) 22%, transparent) 0%,
    transparent 60%);
    opacity: 0;
    transition: opacity .35s ease;
}

.media-fx:hover::after {
    opacity: .55;
}

/* ===== People text polish ===== */
/* å§“åï¼šæ›´å¼ºå±‚çº§ + éœ“è™¹åˆ†å‰²çº¿ï¼ˆä¸ video-title å‘¼åº”ï¼‰ */
.person-name {
    font-weight: 800;
    font-size: clamp(16px, 1.1rem, 18px);
    letter-spacing: .2px;
    line-height: 1.35;
    position: relative;
    display: inline-block; /* è®©ä¸‹åˆ’çº¿åªå æ ‡é¢˜å®½åº¦ */
    max-width: 100%;
}

.person-name::after {
    content: "";
    display: block;
    height: 2px;
    margin-top: 6px;
    width: 46%;
    background: linear-gradient(90deg, #00e0ff, transparent 70%);
    opacity: .85;
    border-radius: 2px;
    box-shadow: 0 0 12px rgba(0, 224, 255, .35);
    transition: width .35s ease, opacity .35s ease;
}

.card:hover .person-name::after {
    width: 64%;
    opacity: 1;
}

/* è§’è‰²/å•ä½ï¼šæ›´ç²¾è‡´çš„æ¬¡çº§å±‚çº§ */
.person-meta {
    margin-top: 6px;
    color: var(--muted);
    font-size: 13.5px;
    letter-spacing: .1px;
    display: block; /* name æ¢è¡Œåæ›´ç¨³å®š */
    opacity: .88;
}

.person-role {
    text-transform: none;
    font-variant-numeric: tabular-nums;
    font-weight: 600;
    color: color-mix(in oklab, var(--muted) 80%, white 20%);
}

.person-sep {
    margin: 0 .4em;
    opacity: .5;
}

/* å¡ç‰‡åº•éƒ¨æŒ‰é’®/é“¾æ¥è¡Œä¸ä¸Šæ–¹æ–‡å­—çš„èŠ‚å¥ */
.card .body .actions {
    margin-top: 10px;
}

/* é˜²æ­¢â€œæŸ”å…‰åœˆâ€é®æŒ¡æ–‡å­—ç‚¹å‡»ï¼ˆæ¥è‡ªä½ ä¹‹å‰çš„ image æ•ˆæœå®¹å™¨ï¼‰ */
.media-fx + .person-name,
.media-fx + .person-name + .person-meta {
    position: relative;
    z-index: 1;
}

.card:hover .person-name {
    text-shadow: 0 0 16px rgba(0, 224, 255, .18);
}

/* People card â€“ same depth language as video */
#people-grid .card.people-card {
    position: relative;
    background: var(--bg-card);
    backdrop-filter: blur(12px) saturate(115%);
    border: 1px solid var(--border-color);
    border-radius: 16px;
    box-shadow: var(--shadow-card);
    transition: transform .28s cubic-bezier(.2, .8, .2, 1),
    box-shadow .28s ease,
    border-color .28s ease,
    background-color .28s ease;
    overflow: hidden;
}

#people-grid .card.people-card::before {
    content: "";
    position: absolute;
    inset: -1px;
    border-radius: inherit;
    background: radial-gradient(240px 160px at 20% -10%, color-mix(in oklab, var(--brand) 18%, transparent) 0%, transparent 60%),
    radial-gradient(200px 160px at 110% 10%, color-mix(in oklab, var(--brand-2) 14%, transparent) 0%, transparent 60%);
    opacity: 0;
    transition: opacity .35s ease;
    pointer-events: none;
}

#people-grid .card.people-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-hover);
    border-color: color-mix(in oklab, var(--border-color) 50%, var(--text) 10%);
}

#people-grid .card.people-card:hover::before {
    opacity: 1;
}

#people-grid .card.people-card:focus-within {
    outline: none;
    box-shadow: var(--shadow-hover), 0 0 0 2px color-mix(in oklab, var(--brand) 45%, transparent);
    transform: translateY(-3px);
}

@media (hover: hover) {
    #people-grid .card.people-card:active {
        transform: translateY(-1px) scale(.995);
    }
}

#people-grid .card.people-card .body {
    position: relative;
    z-index: 1;
}

/* Neon underline adapt for light theme */
.light .video-title::after,
.light .person-name::after {
    background: linear-gradient(90deg, #0078a6, transparent 70%);
    box-shadow: 0 0 8px rgba(0, 120, 166, .25);
    opacity: .95;
}

/* Text colors follow theme tokens */
.video-title, .person-name {
    color: var(--text);
}

.video-meta, .person-meta {
    color: var(--muted);
}

/* ===========================
   Projects & Life â€” Card Effects
   ç»Ÿä¸€â€œç»ç’ƒ + å±‚æ¬¡å…‰å½± + æ‚¬æµ®ä¸ŠæŠ¬â€
   ï¼ˆä¸ video-card / people-card è§†è§‰ä¸€è‡´ï¼‰
   =========================== */

/* è®© life çš„ <a class="card"> ä½œä¸ºå®Œæ•´å—çº§å¡ç‰‡å±•ç¤º */
#life-home-grid .card {
    display: block;
}

/* ç»ç’ƒå¡ç‰‡è¯­è¨€ï¼ˆä¸ video/people ä¿æŒä¸€è‡´ï¼‰ */
#research-grid .card.project-card,
#life-home-grid .card.life-card {
    position: relative;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 16px;
    box-shadow: var(--shadow-card);
    backdrop-filter: blur(16px) saturate(115%);
    -webkit-backdrop-filter: blur(16px) saturate(115%);
    overflow: hidden;
    transition: transform .28s cubic-bezier(.2, .8, .2, 1),
    box-shadow .28s ease,
    border-color .28s ease,
    background-color .28s ease;
}

/* æ‚¬æµ®ä¸ŠæŠ¬ + æ›´å¼ºé˜´å½± */
#research-grid .card.project-card:hover,
#life-home-grid .card.life-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-hover);
    border-color: color-mix(in oklab, var(--border-color) 60%, var(--text) 12%);
}

/* Project é¡¶éƒ¨æŸ”å…‰ï¼ˆè´´è¿‘ people çš„å±‚æ¬¡æ„Ÿï¼Œä½†æ›´å…‹åˆ¶ï¼‰ */
#research-grid .card.project-card::before {
    content: "";
    position: absolute;
    inset: -1px;
    border-radius: inherit;
    pointer-events: none;
    background: radial-gradient(220px 140px at 10% -10%, color-mix(in oklab, var(--brand) 12%, transparent) 0%, transparent 60%),
    radial-gradient(180px 140px at 110% 10%, color-mix(in oklab, var(--brand-2) 10%, transparent) 0%, transparent 60%);
    opacity: 0;
    transition: opacity .35s ease;
}

#research-grid .card.project-card:hover::before {
    opacity: .95;
}

/* ===== æ ‡é¢˜éœ“è™¹åˆ†å‰²çº¿ï¼ˆæ‰©å±•åˆ° Project / Life æ ‡é¢˜ï¼‰ ===== */
.project-title,
.life-title {
    position: relative;
    font-weight: 700;
    color: var(--text);
    line-height: 1.35;
}

.project-title::after,
.life-title::after {
    content: "";
    display: block;
    height: 2px;
    margin-top: 6px;
    width: 40%;
    border-radius: 2px;
    background: linear-gradient(90deg, #00e0ff, transparent 70%);
    box-shadow: 0 0 12px rgba(0, 224, 255, .35);
    transition: width .35s ease, opacity .35s ease, background .3s ease, box-shadow .3s ease;
}

/* æ‚¬æµ®æ—¶åŠ é•¿åˆ†å‰²çº¿ï¼ˆä¸ people çš„äº¤äº’ä¿æŒä¸€è‡´ï¼‰ */
#research-grid .card.project-card:hover .project-title::after,
#life-home-grid .card.life-card:hover .life-title::after {
    width: 64%;
    opacity: 1;
}

/* äº®è‰²ä¸»é¢˜ä¸‹çš„å¯è¯»æ€§ä¼˜åŒ–ï¼ˆæ²¿ç”¨ä½ ç°æœ‰ video/people çš„é€»è¾‘ï¼‰ */
.light .project-title::after,
.light .life-title::after {
    background: linear-gradient(90deg, #0078a6, transparent 70%);
    box-shadow: 0 0 8px rgba(0, 120, 166, .25);
    opacity: .95;
}

/* æ¬¡çº§æ–‡å­—ï¼ˆå‰¯æ ‡é¢˜/å…ƒä¿¡æ¯ï¼‰è‰²æ¿ç»Ÿä¸€ */
.project-meta,
.life-meta {
    color: var(--muted);
    font-size: 13.5px;
    letter-spacing: .1px;
    margin-top: 6px;
}

/* ===========================
   Subpages â€” Card Effects (Projects / Life / People)
   è®©å­é¡µå¡ç‰‡è·å¾—ä¸é¦–é¡µä¸€è‡´çš„â€œç»ç’ƒ + å±‚æ¬¡å…‰å½±â€
   =========================== */

/* æŸäº›å­é¡µä½¿ç”¨ <a class="card">ï¼Œç¡®ä¿è¡¨ç°ä¸ºå—çº§å¡ç‰‡ */
#proj-all-grid .card,
#life-grid .card,
#people-all-grid .card {
    display: block;
}

/* ç»Ÿä¸€ç»ç’ƒå¡ç‰‡è¯­è¨€ */
#proj-all-grid .card.project-card,
#life-grid .card.life-card,
#people-all-grid .card.people-card {
    position: relative;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    border-radius: 16px;
    box-shadow: var(--shadow-card);
    backdrop-filter: blur(16px) saturate(115%);
    -webkit-backdrop-filter: blur(16px) saturate(115%);
    overflow: hidden;
    transition: transform .28s cubic-bezier(.2, .8, .2, 1),
    box-shadow .28s ease,
    border-color .28s ease,
    background-color .28s ease;
}

/* æ‚¬æµ®ä¸ŠæŠ¬ + å¼ºé˜´å½± */
#proj-all-grid .card.project-card:hover,
#life-grid .card.life-card:hover,
#people-all-grid .card.people-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-hover);
    border-color: color-mix(in oklab, var(--border-color) 60%, var(--text) 12%);
}

/* Projects é¡¶éƒ¨æŸ”å…‰ï¼ˆå­é¡µç‰ˆï¼Œç•¥å¼±ï¼‰ */
#proj-all-grid .card.project-card::before {
    content: "";
    position: absolute;
    inset: -1px;
    border-radius: inherit;
    pointer-events: none;
    background: radial-gradient(220px 140px at 10% -10%, color-mix(in oklab, var(--brand) 12%, transparent) 0%, transparent 60%),
    radial-gradient(180px 140px at 110% 10%, color-mix(in oklab, var(--brand-2) 10%, transparent) 0%, transparent 60%);
    opacity: 0;
    transition: opacity .35s ease;
}

#proj-all-grid .card.project-card:hover::before {
    opacity: .95;
}

/* People é¡¶éƒ¨æŸ”å…‰ï¼ˆä¸é¦–é¡µä¸€è‡´ï¼‰ */
#people-all-grid .card.people-card::before {
    content: "";
    position: absolute;
    inset: -1px;
    border-radius: inherit;
    pointer-events: none;
    background: radial-gradient(240px 160px at 20% -10%, color-mix(in oklab, var(--brand) 18%, transparent) 0%, transparent 60%),
    radial-gradient(200px 160px at 110% 10%, color-mix(in oklab, var(--brand-2) 14%, transparent) 0%, transparent 60%);
    opacity: 0;
    transition: opacity .35s ease;
}

#people-all-grid .card.people-card:hover::before {
    opacity: 1;
}

/* éœ“è™¹æ ‡é¢˜çº¿ï¼šæ‰©å±•åˆ°å­é¡µ */
:is(.project-title, .life-title, .person-name) {
    position: relative;
    font-weight: 700;
    color: var(--text);
    line-height: 1.35;
}

:is(.project-title, .life-title, .person-name)::after {
    content: "";
    display: block;
    height: 2px;
    margin-top: 6px;
    width: 40%;
    border-radius: 2px;
    background: linear-gradient(90deg, #00e0ff, transparent 70%);
    box-shadow: 0 0 12px rgba(0, 224, 255, .35);
    transition: width .35s ease, opacity .35s ease, background .3s ease, box-shadow .3s ease;
}

#proj-all-grid .card.project-card:hover .project-title::after,
#people-all-grid .card.people-card:hover .person-name::after {
    width: 64%;
    opacity: 1;
}

.light :is(.project-title, .life-title, .person-name)::after {
    background: linear-gradient(90deg, #0078a6, transparent 70%);
    box-shadow: 0 0 8px rgba(0, 120, 166, .25);
    opacity: .95;
}

/* æ¬¡çº§æ–‡å­—ï¼ˆç»Ÿä¸€è‰²æ¿ï¼‰ */
:is(.project-meta, .life-meta, .person-meta) {
    color: var(--muted);
    font-size: 13.5px;
    letter-spacing: .1px;
    margin-top: 6px;
}

/* ===== Person page: avatar cinematic image effect (no card) ===== */
#person-detail .media-fx {
    position: relative;
    border-radius: 12px;
    overflow: hidden;
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-card);
    backdrop-filter: blur(12px) saturate(115%);
    -webkit-backdrop-filter: blur(12px) saturate(115%);
    transform: translateZ(0);
    transition: box-shadow .35s ease, border-color .35s ease, background-color .35s ease;
}

/* é¡¶éƒ¨æŸ”å…‰ï¼ˆæ›´å…‹åˆ¶ï¼Œé¿å…å–§å®¾å¤ºä¸»ï¼‰ */
#person-detail .media-fx::before {
    content: "";
    position: absolute;
    inset: -1px;
    pointer-events: none;
    border-radius: inherit;
    background: radial-gradient(220px 140px at 10% -10%, color-mix(in oklab, var(--brand) 12%, transparent) 0%, transparent 60%),
    radial-gradient(180px 140px at 110% 10%, color-mix(in oklab, var(--brand-2) 10%, transparent) 0%, transparent 60%);
    opacity: .0;
    transition: opacity .35s ease;
}

#person-detail .media-fx:hover::before {
    opacity: .95;
}

/* è§†å·®é«˜å…‰ï¼šè·Ÿéšé¼ æ ‡ä½ç½®çš„è½»å¾®å…‰æ–‘ */
#person-detail .media-fx::after {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    border-radius: inherit;
    background: radial-gradient(220px 160px at var(--mx, 50%) var(--my, 40%),
    rgba(255, 255, 255, .08), transparent 60%);
    transition: opacity .25s ease;
}

/* å›¾ç‰‡æœ¬ä½“ï¼šè½»å¾®ç¼©æ”¾+æäº®ï¼Œä¿ç•™ä½ åŸæœ¬çš„å¤´åƒæ¯”ä¾‹è®¾ç½® */
#person-detail .media-fx > img {
    display: block;
    width: 50%;
    height: auto;
    object-fit: cover;
    transition: transform .35s ease, filter .35s ease;
}

#person-detail .media-fx:hover > img {
    transform: scale(1.03) translateY(-2px);
    filter: brightness(1.06);
}

/* ===== Person page avatar: make wrapper + img a perfect fit ===== */

/* å¤´åƒåŸå…ˆå¯èƒ½è‡ªå¸¦è¾¹æ¡†/åœ†è§’ï¼Œè¿™é‡Œäº¤ç»™å¤–å±‚ç»Ÿä¸€ç®¡ç† */
#person-detail img.avatar {
    border: none !important;
    border-radius: 0 !important;
    box-shadow: none !important;
}

/* å¤–å±‚åŒ…è£¹ï¼šä¸å›¾ç‰‡æˆä¸ºâ€œä¸€ä½“â€â€”â€”ä¸å†è¢«çˆ¶å®¹å™¨æ‹‰ä¼¸ */
#person-detail .media-fx.avatar-frame {
    display: inline-block; /* è®©å¤–å±‚æŒ‰å†…å®¹æ”¶ç¼© */
    width: min(50%, 500px); /* ç»§æ‰¿ä½ ä¸ªäººé¡µå¤´åƒçš„ max-width è¯­ä¹‰ */
    border-radius: 12px; /* ä¸ä½ é¡µé¢è®¾è®¡ä¸€è‡´ */
    overflow: hidden;

    /* ç»ç’ƒè´¨æ„Ÿæ²¿ç”¨ä¹‹å‰çš„å˜é‡ */
    background: var(--bg-card);
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-card);
    backdrop-filter: blur(12px) saturate(115%);
    -webkit-backdrop-filter: blur(12px) saturate(115%);
}

/* å›¾ç‰‡å æ»¡åŒ…è£¹ï¼ˆç”¨åŒ…è£¹æ¥æ§åˆ¶æœ€ç»ˆå°ºå¯¸ï¼‰ */
#person-detail .media-fx.avatar-frame > img {
    display: block;
    width: 100%;
    height: auto; /* ä¸æ‹‰ä¼¸çºµæ¨ªæ¯” */
    border-radius: inherit;
}

/* æ‚¬æµ®æŸ”å…‰ä¸è§†å·®ä»ç„¶ä¿ç•™ï¼ˆå¦‚æœä½ ä¹‹å‰å·²åŠ è¿‡ï¼Œå¯ä¿ç•™æˆ–çœç•¥è¿™æ®µï¼‰ */
#person-detail .media-fx.avatar-frame::before {
    content: "";
    position: absolute;
    inset: -1px;
    border-radius: inherit;
    pointer-events: none;
    background: radial-gradient(220px 140px at 10% -10%, color-mix(in oklab, var(--brand) 12%, transparent) 0%, transparent 60%),
    radial-gradient(180px 140px at 110% 10%, color-mix(in oklab, var(--brand-2) 10%, transparent) 0%, transparent 60%);
    opacity: 0;
    transition: opacity .35s ease;
}

#person-detail .media-fx.avatar-frame:hover::before {
    opacity: .95;
}

#person-detail .media-fx.avatar-frame::after {
    content: "";
    position: absolute;
    inset: 0;
    pointer-events: none;
    border-radius: inherit;
    background: radial-gradient(220px 160px at var(--mx, 50%) var(--my, 40%), rgba(255, 255, 255, .08), transparent 60%);
}

/* ==== Accent CTA buttons (breathing glow + subtle shimmer) ==== */
:root {
    /* ç»Ÿä¸€å‚æ•°ï¼Œä¾¿äºå…¨ç«™è°ƒèŠ‚ */
    --cta-radius: 12px;
    --cta-glow1: color-mix(in oklab, var(--brand) 92%, white 0%);
    --cta-glow2: color-mix(in oklab, var(--brand-2) 92%, white 0%);
    --cta-bg: color-mix(in oklab, var(--panel) 88%, black 0%);
    --cta-border: color-mix(in oklab, var(--border) 70%, transparent);
    --cta-text: var(--text);
}

/* åŸºç¡€æ€ï¼šåœ¨ ghost/solid çš„åŸºç¡€ä¸Šå ä¸€å±‚é«˜äº®ï¼Œä½†ä¸è¿‡åˆ†åˆºçœ¼ */
.btn.cta {
    position: relative;
    border-radius: var(--cta-radius);
    border-color: var(--cta-border);
    background: linear-gradient(180deg, color-mix(in oklab, var(--panel-2) 70%, transparent), var(--panel));
    color: var(--cta-text);
    isolation: isolate; /* è®©ä¼ªå…ƒç´ çš„æ··åˆä¸å½±å“å¤–éƒ¨ */
    will-change: box-shadow, transform;
    transition: transform .18s ease,
    box-shadow .25s ease,
    border-color .25s ease,
    background-color .25s ease;
}

/* å‘¼å¸å…‰ï¼ˆå¸¸æ€è½»å¾®ã€hover åŠ å¼ºï¼‰ */
.btn.cta {
    animation: cta-breathe 2.6s ease-in-out infinite;
    box-shadow: 0 0 0 0 rgba(0, 0, 0, 0),
    0 0 0 0 rgba(0, 0, 0, 0),
    0 0 0 0 rgba(0, 0, 0, 0);
}

@keyframes cta-breathe {
    0%, 100% {
        box-shadow: 0 0 0 0 rgba(0, 0, 0, 0),
        0 0 0 0 rgba(0, 0, 0, 0),
        0 0 0 0 rgba(0, 0, 0, 0.0);
    }
    50% {
        box-shadow: 0 0 0 0 rgba(0, 0, 0, 0),
        0 0 22px 6px color-mix(in oklab, var(--cta-glow1) 30%, transparent),
        0 0 30px 10px color-mix(in oklab, var(--cta-glow2) 22%, transparent);
    }
}

/* è½»å¾®æµå…‰ï¼šä»…åœ¨ hover æ—¶æ²¿æŒ‰é’®æ¨ªå‘æ‰«è¿‡ä¸€æ¡æŸ”å…‰ */
.btn.cta::after {
    content: "";
    position: absolute;
    inset: 1px;
    border-radius: calc(var(--cta-radius) - 1px);
    background: linear-gradient(120deg,
    transparent 0%,
    color-mix(in oklab, white 30%, var(--cta-glow2)) 15%,
    color-mix(in oklab, white 18%, var(--cta-glow1)) 25%,
    transparent 40%);
    background-size: 220% 100%;
    mix-blend-mode: screen;
    opacity: 0;
    pointer-events: none;
    transition: opacity .25s ease, background-position .6s ease;
}

.btn.cta:hover::after {
    opacity: .55;
    background-position: -120% 0;
}

/* æ‚¬åœ/èšç„¦çš„åé¦ˆï¼ˆç•¥å¾®ä¸ŠæŠ¬ + è¾¹ç•Œæ›´æ¸…æ™°ï¼‰ */
.btn.cta:hover {
    transform: translateY(-1px);
    border-color: color-mix(in oklab, var(--cta-glow1) 30%, var(--cta-border));
}

.btn.cta:focus-visible {
    outline: 2px solid color-mix(in oklab, var(--cta-glow1) 55%, transparent);
    outline-offset: 2px;
}

/* äº®è‰²ä¸»é¢˜ä¸‹åšå¯¹æ¯”åº¦ä¿æŠ¤ï¼Œé¿å…è¿‡æ› */
.light .btn.cta {
    --cta-bg: color-mix(in oklab, #ffffff 85%, var(--panel) 15%);
    --cta-border: rgba(0, 0, 0, .08);
}

.light .btn.cta::after {
    opacity: .45;
}

/* åŠ¨æ•ˆå¯è®¿é—®æ€§ï¼šç”¨æˆ·é€‰æ‹©â€œå‡å°‘åŠ¨æ•ˆâ€æ—¶ï¼Œç¦ç”¨åŠ¨ç”»ä½†ä¿ç•™é™æ€é«˜äº® */
@media (prefers-reduced-motion: reduce) {
    .btn.cta {
        animation: none;
    }

    .btn.cta::after {
        transition: none;
    }
}

/* è®©ç®­å¤´/â†—æ›´æœ‰åŠ¨æ„Ÿï¼ˆå¯é€‰ï¼‰ */
.btn.cta:hover {
    letter-spacing: .1px;
}

.btn.cta:hover svg, .btn.cta:hover .arrow {
    transform: translateX(1px);
}


/* === Fix: Light theme CTA text contrast === */
.light .btn.cta {
    --cta-text: var(--text); /* æˆ–ç›´æ¥ç”¨ var(--text) ä»¥ä¿æŒä¸»é¢˜ä¸€è‡´ */
    color: var(--cta-text);
}

/* è‹¥ä¸ ghost ä¸€èµ·ä½¿ç”¨ï¼ˆå¦‚ .btn.ghost.ctaï¼‰ï¼Œå¯åŠ æ›´å¼ºå¯¹æ¯”çš„è¾¹æ¡†ä¸èƒŒæ™¯ */
.light .btn.ghost.cta {
    --cta-text: #0f172a;
    color: var(--cta-text);
    border-color: rgba(0, 0, 0, 0.1);
    background: color-mix(in oklab, #ffffff 92%, var(--panel) 8%);
}


/* ä¿æŒä½ ç°æœ‰çš„å°ºå¯¸ä¸€è‡´æ€§ï¼ˆæ–‡ä»¶é‡Œå·²æœ‰ min-height è§„åˆ™ä¼šç»§æ‰¿ï¼‰ */

/*.cinematic-overlay { position: fixed; inset: 0; background: rgba(0,0,0,.75); display: none; align-items: center; justify-content: center; z-index: 70; }*/
/*.cinematic-overlay.active { display: flex; }*/
/*.cinematic-player { width: min(1200px, 92vw); aspect-ratio: 16/9; position: relative; background: #000; border-radius: 14px; box-shadow: 0 10px 30px rgba(0,0,0,.4); overflow: hidden; }*/
/*.cinematic-close { position: absolute; top: 8px; right: 8px; z-index: 1; border: 1px solid rgba(255,255,255,.2); background: rgba(0,0,0,.4); color: #fff; border-radius: 10px; padding: 6px 10px; cursor: pointer; }*/
/*.cinematic-iframe { width: 100%; height: 100%; border: 0; }*/

/*.cinematic-overlay{position:fixed;inset:0;background:rgba(0,0,0,.75);display:none;align-items:center;justify-content:center;z-index:70}*/
/*.cinematic-overlay.active{display:flex}*/
/*.cinematic-player{width:min(1200px,92vw);aspect-ratio:16/9;position:relative;background:#000;border-radius:14px;overflow:hidden}*/
#cinematic-host {
    width: 100%;
    height: 100%
}

/*.cinematic-close{position:absolute;top:8px;right:8px;z-index:1;border:1px solid rgba(255,255,255,.25);background:rgba(0,0,0,.4);color:#fff;border-radius:10px;padding:6px 10px;cursor:pointer}*/
/*.cinematic-iframe{width:100%;height:100%;border:0}*/

/* ===== Peer Recognition micro-tweaks ===== */
#repute-list .prose {
    margin: 0;
}

#repute-list .prose sup a {
    text-decoration: none;
    opacity: .9;
}

#repute-list .prose mark {
    padding: 0 .2em;
    border-radius: 4px;
    background: color-mix(in oklab, var(--brand) 22%, transparent);
}

/* BEGIN PATCH: styles.css (Peer Recognition) */
/* å®½å¡ï¼šå·¦ä¾§å°å¤´åƒï¼ˆå›ºå®šï¼‰ã€å³ä¾§å¤§æ®µè¯„ä»·ï¼ˆè‡ªé€‚åº”ï¼‰ */
.repute-card {
    --repute-avatar: 76px;
    --repute-gap: 14px;
    display: grid;
    grid-template-columns: var(--repute-avatar) 1fr;
    gap: var(--repute-gap);
    align-items: flex-start;
    width: min(720px, 100%);
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 18px;
    box-shadow: var(--shadow);
    padding: 14px;
    overflow: hidden;
    transition: transform .25s ease, box-shadow .25s ease, border-color .25s ease;
}

/* æ•´å¡æŠ›å…‰ï¼šä¸ video/people/life åŒæ„Ÿå—ï¼ˆè½»æµ®ã€æäº®ï¼‰ */
.repute-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg, 0 8px 24px rgba(0, 0, 0, .12));
    border-color: color-mix(in oklab, var(--brand) 24%, var(--border));
}

/* å·¦ä¾§å¤´åƒåŒºï¼ˆå°è€Œç²¾ï¼‰ */
.repute-media {
    width: var(--repute-avatar);
    min-width: var(--repute-avatar);
    height: var(--repute-avatar);
    border-radius: 50%;
    overflow: hidden;
    border: 1px solid var(--border);
    position: relative;
}

.repute-media img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
}

/* å³ä¾§ä¸»ä½“ */
.repute-body {
    min-width: 0;
}

.repute-topline {
    display: flex;
    flex-wrap: wrap;
    gap: 8px 12px;
    align-items: baseline;
    margin-bottom: 6px;
}

.repute-name {
    font-weight: 800;
    line-height: 1.15;
}

.repute-meta {
    color: var(--muted);
    font-size: 13px;
}

/* è¯„ä»·æ­£æ–‡ï¼ˆå¯Œæ–‡æœ¬ï¼‰ */
.repute-quote.prose {
    margin: 0;
}

.repute-quote.prose p {
    margin: .45em 0;
}

.repute-quote.prose sup a {
    text-decoration: none;
    opacity: .9;
}

.repute-quote.prose mark {
    padding: 0 .22em;
    border-radius: 4px;
    background: color-mix(in oklab, var(--brand) 22%, transparent);
}

/* å°å±ç­–ç•¥ï¼šå¤´åƒæ›´å°ï¼Œä»ä¿æŒå·¦å³å¸ƒå±€ï¼›ç‰¹åˆ«çª„æ—¶æ”¹ä¸ºä¸Šä¸‹å †å  */
@media (max-width: 720px) {
    .repute-card {
        --repute-avatar: 64px;
    }
}

@media (max-width: 520px) {
    .repute-card {
        grid-template-columns: 1fr;
        padding: 12px;
    }

    .repute-media {
        width: 56px;
        height: 56px;
        margin-bottom: 8px;
    }
}

/* END PATCH */

/* BEGIN PATCH: Wider Peer Recognition card */
.repute-card {
    /* æ–°å¢ä¸€ä¸ªå¯æ§çš„æœ€å¤§å®½åº¦å˜é‡ */
    --repute-maxw: 840px; /* ä¹‹å‰æ˜¯ 720pxï¼Œæ‰©å¤§åˆ° 840px */
    --repute-avatar: 80px; /* å¤´åƒå¾®å¢ 76 â†’ 80ï¼Œæ›´åè°ƒ */
    width: min(var(--repute-maxw), 100%);
    margin-inline: auto; /* å±…ä¸­ */
}

/* è¶…å¤§å±å†æ”¾å¤§ä¸€ç‚¹ï¼Œè®©æ–‡å­—æ›´èˆ’å±• */
@media (min-width: 1440px) {
    .repute-card {
        --repute-maxw: 900px;
    }
}

/* æçª„æ—¶ä»æŒ‰ä¹‹å‰ç­–ç•¥å †å ï¼ˆå·²åœ¨ä½ ç°æœ‰ media query ä¸­å¤„ç†ï¼Œè¿™é‡Œä¸é‡å¤ï¼‰ */
/* END PATCH */

/* BEGIN PATCH: Dark theme mark highlight stronger */
.repute-quote.prose mark {
    /* æ˜æš—é€šç”¨çš„åŸºç¡€ï¼šå¢åŠ å†…è¾¹è·å’Œåœ†è§’ï¼Œä½ å·²æœ‰å¯ä¿ç•™ */
    padding: 0 .26em;
    border-radius: 5px;
}

/* 1) ç³»ç»Ÿæš—è‰²åå¥½ */
@media (prefers-color-scheme: dark) {
    .repute-quote.prose mark {
        /* æ›´é«˜çš„å¯¹æ¯”åº¦ï¼šä½¿ç”¨è¾ƒäº®çš„åº•è‰² + è½»å¾®å‘å…‰è¾¹ */
        background: color-mix(in oklab, #ffffff 24%, var(--brand));
        color: inherit; /* ä¸æ”¹æ–‡å­—è‰²ï¼Œé¿å…åå·®è¿‡åº¦ */
        box-shadow: inset 0 0 0 1px color-mix(in oklab, #ffffff 30%, transparent),
        0 0 0 2px rgba(255, 255, 255, .04); /* å¾®å¼±æè¾¹ä¸å¤–æ™•ï¼Œæå‡è¾¹ç•Œæ„Ÿ */
    }
}

/* 2) ç«™ç‚¹è‡ªæœ‰çš„æš—è‰² data-attrï¼ˆè‹¥ä½ æœ‰åˆ‡æ¢æŒ‰é’®ï¼‰ */
:root[data-theme="dark"] .repute-quote.prose mark {
    background: color-mix(in oklab, #ffffff 24%, var(--brand));
    color: inherit;
    box-shadow: inset 0 0 0 1px color-mix(in oklab, #ffffff 30%, transparent),
    0 0 0 2px rgba(255, 255, 255, .04);
}

/* åŠ å¼ºè„šæ³¨ä¸Šæ ‡å¯ç‚¹æ€§ï¼šç•¥æå‡å¯è§åº¦ */
.repute-quote.prose sup a {
    opacity: .95;
    text-decoration: none;
    border-bottom: 1px dashed currentColor;
}

/* END PATCH */

/* === PATCH 1: Dark æ¨¡å¼ä¸‹ <mark> é«˜äº®æ›´æ˜¾çœ¼ï¼ˆæå‡ä¼˜å…ˆçº§+å…œåº•ï¼‰ === */
/* å…ˆç»Ÿä¸€åŸºç¡€ï¼šè®© reputation ä¸¤ä¸ªå®¹å™¨é‡Œçš„ mark éƒ½èµ°è¿™ä¸€å¥— */
#repute-list .repute-quote.prose mark,
#repute-all-grid .repute-quote.prose mark {
    padding: 0 .28em;
    border-radius: 5px;
}

/* A) ç³»ç»Ÿæš—è‰²åå¥½ */
@media (prefers-color-scheme: dark) {
    #repute-list .repute-quote.prose mark,
    #repute-all-grid .repute-quote.prose mark {
        /* ä½¿ç”¨æ›´äº®çš„åº•è‰² + è½»æè¾¹ï¼Œæé«˜å¯¹æ¯”åº¦ */
        background-color: color-mix(in oklab, #fff 28%, var(--brand)) !important;
        box-shadow: inset 0 0 0 1px color-mix(in oklab, #fff 32%, transparent),
        0 0 0 2px rgba(255, 255, 255, .05);
    }
}

/* B) å¦‚æœä½ ç”¨ data-theme åˆ‡æ¢æš—è‰²ï¼Œè¦†ç›–åˆ°ä½ï¼ˆæé«˜é€‰æ‹©å™¨ä¼˜å…ˆçº§ï¼‰ */
:root[data-theme="dark"] #repute-list .repute-quote.prose mark,
:root[data-theme="dark"] #repute-all-grid .repute-quote.prose mark,
html.dark #repute-list .repute-quote.prose mark,
html.dark #repute-all-grid .repute-quote.prose mark,
body.dark #repute-list .repute-quote.prose mark,
body.dark #repute-all-grid .repute-quote.prose mark {
    background-color: color-mix(in oklab, #fff 28%, var(--brand)) !important;
    box-shadow: inset 0 0 0 1px color-mix(in oklab, #fff 32%, transparent),
    0 0 0 2px rgba(255, 255, 255, .05);
}

/* å¦‚éœ€æ›´é†’ç›®ï¼ŒæŠŠ 28% å†è°ƒé«˜åˆ° 32% å³å¯ */

/* === PATCH 2: æ‰‹æœºç«¯å¤´åƒè¢«æ‹‰ä¼¸â†’å¼ºåˆ¶æ­£åœ† & ä¸è¢«æ …æ ¼æ’‘å¼€ === */
.repute-media {
    /* é˜²æ­¢è¢« grid æ‹‰ä¼¸ */
    align-self: start;
    justify-self: start;
    /* åŒä¿é™©ï¼šå›ºå®šæ­£æ–¹å½¢æ¯”ä¾‹ */
    aspect-ratio: 1 / 1;
}

.repute-media img {
    /* è¦†ç›–å…¨å±€ img { height:auto } ç­‰è§„åˆ™ï¼Œé¿å…æ¤­åœ† */
    width: 100% !important;
    height: 100% !important;
    aspect-ratio: 1 / 1;
    border-radius: 50%;
    object-fit: cover;
    display: block;
}

/* çª„å±ä¸‹æˆ‘ä»¬ä»¥å‰è®¾ç½®äº† 56x56ï¼Œå¦‚æœæœ‰åˆ«çš„æ ·å¼è¦†ç›–ï¼Œä¹Ÿç”¨å¼ºåˆ¶ç­‰å®½é«˜å…œåº• */
@media (max-width: 520px) {
    .repute-media {
        width: 56px !important;
        height: 56px !important;
    }
}

/* === Peer Recognitionï¼šå¼ºåŠ›å…œåº•ï¼ˆæ”¾åœ¨ styles.css æœ«å°¾ï¼‰ === */

/* 1) å¡ç‰‡æ›´å®½ï¼šæ¡Œé¢ç«¯æ›´èˆ’å±• */
.repute-card {
    --repute-maxw: 900px; /* ä½ ä¹‹å‰æ˜¯ 720/840ï¼Œè¿™é‡Œå†åŠ ä¸€æ¡£ */
    --repute-avatar: 80px;
    width: min(var(--repute-maxw), 100%);
    margin-inline: auto;
}

/* 2) æ‰‹æœºç«¯å¤´åƒç»ä¸å˜å½¢ï¼šå®¹å™¨ä¸å›¾ç‰‡éƒ½å¼ºåˆ¶ 1:1 */
.repute-media {
    align-self: start;
    justify-self: start;
    width: var(--repute-avatar);
    height: var(--repute-avatar);
    aspect-ratio: 1 / 1; /* å…³é”®ï¼šé”å®šæ­£æ–¹å½¢ */
    border-radius: 50%;
    overflow: hidden;
}

.repute-media img {
    width: 100% !important; /* è¦†ç›–å…¨å±€ img é«˜åº¦/å®½åº¦è§„åˆ™ */
    height: 100% !important;
    aspect-ratio: 1 / 1;
    object-fit: cover;
    border-radius: 50%;
    display: block;
}

@media (max-width: 520px) {
    .repute-media {
        width: 56px !important;
        height: 56px !important;
    }
}

/* 3) æš—è‰²ï¼ˆç«™å†…ï¼‰é«˜äº®æ›´æ˜¾çœ¼ï¼š
   ä½ ç«™å†…çš„æ·±è‰²= bodyæ²¡æœ‰.light ç±»ï¼›ä¸è¦åªä¾èµ– prefers-color-scheme */
#repute-list .repute-quote.prose mark,
#repute-all-grid .repute-quote.prose mark {
    padding: 0 .28em;
    border-radius: 5px;
}

/* ç«™å†…æš—è‰²æ¨¡å¼ï¼ˆé»˜è®¤æ€ï¼‰ï¼šç”¨ body:not(.light) è¦†ç›–ï¼Œä¸”åŠ  !important å…œåº• */
body:not(.light) #repute-list .repute-quote.prose mark,
body:not(.light) #repute-all-grid .repute-quote.prose mark {
    background-color: color-mix(in oklab, #fff 30%, var(--brand)) !important;
    box-shadow: inset 0 0 0 1px color-mix(in oklab, #fff 32%, transparent),
    0 0 0 2px rgba(255, 255, 255, .05);
}

/* å¦‚æœä½ ä¹Ÿå¸Œæœ›ç³»ç»Ÿæš—è‰²åå¥½ç”Ÿæ•ˆï¼Œå¯ä»¥ä¿ç•™è¿™ç»„ï¼ˆå¯é€‰ï¼‰ */
@media (prefers-color-scheme: dark) {
    #repute-list .repute-quote.prose mark,
    #repute-all-grid .repute-quote.prose mark {
        background-color: color-mix(in oklab, #fff 28%, var(--brand)) !important;
        box-shadow: inset 0 0 0 1px color-mix(in oklab, #fff 32%, transparent),
        0 0 0 2px rgba(255, 255, 255, .05);
    }
}

/* è„šæ³¨ä¸Šæ ‡ç‚¹å‡»æ„Ÿï¼ˆä¿ç•™ï¼‰ */
.repute-quote.prose sup a {
    opacity: .95;
    text-decoration: none;
    border-bottom: 1px dashed currentColor;
}

/* === FIX: mobile æ­£åœ†å¤´åƒï¼ˆä½œç”¨åŸŸåªé™ reputation ä¸¤ä¸ªå®¹å™¨ï¼‰ === */

/* 1) ä»»ä½•å±å®½éƒ½æŠŠå®¹å™¨é”æˆæ­£æ–¹å½¢ï¼Œç¦æ­¢ Grid æ‹‰ä¼¸ */
#repute-list .repute-card .repute-media,
#repute-all-grid .repute-card .repute-media {
    align-self: start !important; /* åˆ«è¢« align-items: stretch æ‹‰é•¿ */
    justify-self: start !important;
    width: var(--repute-avatar) !important;
    height: var(--repute-avatar) !important;
    aspect-ratio: 1 / 1 !important; /* å®¹å™¨å¼ºåˆ¶æ­£æ–¹ */
    border-radius: 50% !important;
    overflow: hidden !important;
    display: inline-flex !important; /* é˜²æ­¢å—çº§å…ƒç´ åœ¨å•åˆ—ä¸‹è¢«æ‹‰å®½ */
}

/* 2) å¤´åƒå›¾ç‰‡ 1:1 å¡«å……å®¹å™¨ï¼›è¦†ç›– .media-fx / å…¨å±€ img çš„å®½é«˜è§„åˆ™ */
#repute-list .repute-card .repute-media img,
#repute-all-grid .repute-card .repute-media img {
    width: 100% !important;
    height: 100% !important;
    aspect-ratio: 1 / 1 !important;
    object-fit: cover !important;
    border-radius: 50% !important;
    display: block !important;
}

/* 3) è¶…å°å±çš„å°ºå¯¸ï¼ˆæ•°å€¼å¯æŒ‰éœ€è°ƒï¼‰ */
@media (max-width: 520px) {
    #repute-list .repute-card .repute-media,
    #repute-all-grid .repute-card .repute-media {
        width: 56px !important;
        height: 56px !important;
    }
}

/* 4) å•åˆ—æ–­ç‚¹æ—¶ï¼Œå¡ç‰‡è‡ªèº«ä¹Ÿä¸è¦æŠŠå­é¡¹æ’‘å¼€ */
@media (max-width: 520px) {
    #repute-list .repute-card,
    #repute-all-grid .repute-card {
        align-items: start !important; /* ç¦æ­¢å†…éƒ¨çºµå‘æ‹‰ä¼¸ */
        justify-items: start !important; /* ç¦æ­¢å†…éƒ¨æ¨ªå‘æ‹‰ä¼¸ */
    }
}

/* === Peer Recognitionï¼šå¤´åƒæ­£åœ†å…œåº•ï¼ˆè¦†ç›–å…¨å±€ 4:3ï¼‰ === */
.repute-media {
    /* é˜²æ­¢è¢« grid æ‹‰ä¼¸ï¼›é”å®šä¸ºæ­£æ–¹å½¢ */
    align-self: start;
    justify-self: start;
    width: var(--repute-avatar, 80px);
    height: var(--repute-avatar, 80px);
    aspect-ratio: 1 / 1;
    border-radius: 50%;
    overflow: hidden;
}

.repute-media img {
    /* è¦†ç›–å…¨å±€ img/avatar çš„ height:auto ä¸ 4:3 */
    width: 100% !important;
    height: 100% !important;
    aspect-ratio: 1 / 1;
    object-fit: cover;
    border-radius: 50%;
    display: block;
}

/* çª„å±æ›´å°çš„åœ†å½¢å°ºå¯¸ï¼ˆå¯æŒ‰éœ€è°ƒæ•´ï¼‰ */
@media (max-width: 520px) {
    .repute-media {
        width: 56px !important;
        height: 56px !important;
    }
}

/* Fix: Peer Recognition avatar becomes oval on mobile */

/* 1) ç¦æ­¢å•åˆ—æ …æ ¼æŠŠå¤´åƒå®¹å™¨æ‹‰ä¼¸ï¼›å®¹å™¨ä¸å›¾ç‰‡éƒ½é”å®š 1:1 */
#repute-list .repute-card .repute-media,
#repute-all-grid .repute-card .repute-media {
    align-self: start !important;
    justify-self: start !important; /* å…³é”®ï¼šä¸éšåˆ—å®½æ‹‰ä¼¸ */
    width: var(--repute-avatar) !important;
    height: var(--repute-avatar) !important;
    aspect-ratio: 1 / 1 !important; /* å®¹å™¨å¼ºåˆ¶æ­£æ–¹å½¢ */
    border-radius: 50% !important;
    overflow: hidden !important;
    display: inline-flex !important; /* è¿›ä¸€æ­¥é¿å…æ‹‰å®½ */
}

/* 2) å›¾ç‰‡å¡«å……å®¹å™¨ï¼Œå¹¶è¦†ç›–å…¨å±€ img çš„å®½é«˜/æ¯”ä¾‹è§„åˆ™ */
#repute-list .repute-card .repute-media img,
#repute-all-grid .repute-card .repute-media img {
    width: 100% !important;
    height: 100% !important;
    aspect-ratio: 1 / 1 !important;
    object-fit: cover !important;
    border-radius: 50% !important;
    display: block !important;
}

/* 3) å•åˆ—æ–­ç‚¹ä¸‹ï¼Œæ•´å¡ä¹Ÿä¸è¦æŠŠå­é¡¹æ‹‰ä¼¸ */
@media (max-width: 520px) {
    #repute-list .repute-card,
    #repute-all-grid .repute-card {
        align-items: start !important;
        justify-items: start !important;
    }

    /* è‹¥ä½ æƒ³ç»Ÿä¸€æ‰‹æœºå°ºå¯¸ï¼š */
    #repute-list .repute-card .repute-media,
    #repute-all-grid .repute-card .repute-media {
        width: 56px !important;
        height: 56px !important;
    }
}

/* === Peer Recognition: æ›´å®½çš„å¡ç‰‡ & 5è¡Œåæ»šåŠ¨ === */

/* 1) Home ä¸å­é¡µçš„ Peer Recognition å®¹å™¨ï¼šå¼ºåˆ¶ 2 åˆ—ï¼ˆ>=1100pxï¼‰ï¼Œä¸­å°å±é™ä¸º 1 åˆ— */
#repute-list.grid.people,
#repute-all-grid.grid.people {
    grid-template-columns: repeat(1, minmax(460px, 1fr)) !important; /* ä¸¤åˆ—ã€æ¯åˆ—æœ€å° 460pxï¼Œå¡æ›´å®½ */
    gap: 18px;
}

/* <= 1100pxï¼šä¸€åˆ—å±•ç¤ºï¼Œæ›´æ˜“è¯» */
@media (max-width: 1100px) {
    #repute-list.grid.people,
    #repute-all-grid.grid.people {
        grid-template-columns: 1fr !important;
    }
}

/* 2) å¡ç‰‡å†…æ­£æ–‡åŒºåŸŸï¼šè¶…è¿‡çº¦ 5 è¡Œåå‡ºç°æ»šåŠ¨æ¡ï¼Œä¿è¯åŒä¸€è¡Œå¡ç‰‡ç­‰é«˜ */
.repute-quote.prose {
    line-height: 1.55;
    max-height: 7.75em; /* çº¦5è¡Œï¼ˆ5 Ã— 1.55emï¼‰ */
    overflow: auto;
    padding-right: 4px; /* ç»™æ»šåŠ¨æ¡ç•™ç‚¹ç©ºé—´ï¼Œé¿å…é®å­— */
    scrollbar-gutter: stable both-edges;
}

/* è®©å°æ®µè½ä¹‹é—´ç´§å‡‘äº›ï¼Œå‡å°‘â€œç¨€ç–æ„Ÿâ€ */
.repute-quote.prose p {
    margin: .4em 0;
}

/* å¯é€‰ï¼šæ»šåŠ¨æ¡ç¾åŒ–ï¼ˆæ”¯æŒçš„æµè§ˆå™¨ä¼šç”Ÿæ•ˆï¼‰ */
.repute-quote.prose::-webkit-scrollbar {
    width: 8px;
}

.repute-quote.prose::-webkit-scrollbar-thumb {
    background: color-mix(in oklab, var(--text) 15%, transparent);
    border-radius: 8px;
}

/* Peer Recognitionï¼šä¿®æ­£æ‰‹æœºç«¯å¤´åƒè¢«æ‹‰ä¼¸å˜æ¤­åœ†çš„é—®é¢˜ */

/* 1) å…³é—­æ•´å¡çš„é»˜è®¤æ‹‰ä¼¸ï¼Œå­é¡¹ä¸å†è¢«æ¨ªå‘æ’‘å®½ */
.repute-card {
    justify-items: start !important;
    align-items: start !important;
}

/* 2) å¤´åƒå®¹å™¨å¼ºåˆ¶æ­£æ–¹å½¢ï¼Œå¹¶ç¦æ­¢è¢« Grid æ‹‰å®½ */
.repute-card .repute-media {
    width: var(--repute-avatar) !important;
    height: var(--repute-avatar) !important;
    aspect-ratio: 1 / 1 !important;
    border-radius: 50% !important;
    overflow: hidden !important;
    justify-self: start !important; /* å…³é”®ï¼šä¸è¦ stretch */
    align-self: start !important;
}

/* 3) è¦†ç›– .media-fx > img çš„é€šç”¨æ‹‰ä¼¸ï¼Œé”å®š 1:1 å¡«å…… */
.repute-card .repute-media > img {
    width: 100% !important;
    height: 100% !important;
    aspect-ratio: 1 / 1 !important;
    object-fit: cover !important;
    border-radius: 50% !important;
    display: block !important;
}

/* 4) æçª„æ–­ç‚¹ä¸‹çš„å¤´åƒå°ºå¯¸ï¼ˆä½ å·²æœ‰ 56pxï¼Œè¿™é‡Œæ²¿ç”¨å¹¶å…œåº•ï¼‰ */
@media (max-width: 520px) {
    .repute-card .repute-media {
        width: 56px !important;
        height: 56px !important;
    }
}

/* ----- Peer Recognition: honors chips (new) ----- */
.repute-honors {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    margin: 2px 0 6px;
    padding: 0;
    list-style: none;
}

.repute-honors .chip--honor {
    display: inline-flex;
    align-items: center;
    border-radius: 999px;
    border: 1px solid var(--border);
    background: var(--panel);
    color: var(--muted);
    padding: 6px 8px;
    font-size: 12px;
    line-height: 1;
    white-space: nowrap;
}

.loading-hint {
    font-size: 13px;
    color: var(--muted);
    padding: 8px 10px;
    border-radius: 10px;
    border: 1px dashed var(--border);
    background: color-mix(in oklab, var(--panel) 80%, transparent);
}


/* ===== è®¿é—®çº¿è·¯åˆ‡æ¢æŒ‰é’® ===== */

.btn.route-switch {
    font-size: 0.9rem;
    padding-inline: 10px;
    border-radius: 999px;
    opacity: 0.85;
}


.btn.route-switch:hover {
    opacity: 1;
}

/* ===== è®¿é—®çº¿è·¯å¼¹å‡ºèœå• ===== */
.route-popup {
    position: absolute;
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 6px 0;
    width: 190px;
    display: none;
    box-shadow: 0 8px 20px rgba(0, 0, 0, .18);
    z-index: 10000;
}

.route-popup.show {
    display: block;
}

.route-item {
    display: block;
    padding: 6px 14px;
    font-size: 0.88rem;
    text-decoration: none;
    color: var(--text);
    white-space: nowrap;
}

.route-item:hover {
    background: var(--panel-2);
}

/* ===== è®¿é—®çº¿è·¯åˆ‡æ¢æŒ‰é’®ï¼ˆHeaderï¼‰ ===== */
.btn.route-switch {
    font-size: 0.9rem;
    padding-inline: 10px;
    border-radius: 999px;
    opacity: 0.85;
}

.btn.route-switch:hover {
    opacity: 1;
}

.route-label {
    display: inline-flex;
    align-items: center;
    gap: 2px;
}

.route-part {
    opacity: 0.6;
    transition: opacity 0.2s ease, transform 0.2s ease, text-shadow 0.2s ease;
}

/* é«˜äº®å½“å‰çº¿è·¯ï¼šæ›´é†’ç›® */
.route-part.active {
    opacity: 1;
    font-weight: 600;
    transform: translateY(-0.5px);
    text-shadow: 0 0 6px color-mix(in oklab, var(--brand) 70%, transparent);
}

.route-slash {
    opacity: 0.7;
}

/* ===== è®¿é—®çº¿è·¯å¼¹å‡ºèœå• ===== */
.route-popup {
    position: absolute;
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 6px 0;
    width: 210px;
    display: none;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.18);
    z-index: 10000;
}

.route-popup.show {
    display: block;
}

.route-item {
    display: block;
    padding: 6px 14px;
    font-size: 0.88rem;
    text-decoration: none;
    color: var(--text);
    white-space: nowrap;
}

.route-item:hover {
    background: var(--panel-2);
}

/* ===== Routes æŒ‰é’®ï¼ˆHeaderï¼‰ ===== */
.btn.route-switch {
    font-size: 0.9rem;
    padding-inline: 10px;
    border-radius: 999px;
    opacity: 0.85;
}

.btn.route-switch:hover {
    opacity: 1;
}

.route-label {
    display: inline-flex;
    align-items: center;
    gap: 4px;
}

.route-icon {
    font-size: 0.95em;
    opacity: 0.85;
    transition: color 0.2s ease, text-shadow 0.2s ease, transform 0.2s ease;
}

.route-text {
    font-size: 0.9rem;
}

.route-caret {
    font-size: 0.8em;
    opacity: 0.7;
}

/* åœ¨ .site ä¸Šï¼šå›¾æ ‡è½»å¾®åçº¢ / æ›´é†’ç›® */
.route-switch.cn-active .route-icon {
    transform: translateY(-0.5px);
    text-shadow: 0 0 6px color-mix(in oklab, #ff4d4f 60%, transparent);
    color: color-mix(in oklab, #ff4d4f 60%, var(--text));
}

/* ===== å¼¹å‡ºèœå• ===== */
.route-popup {
    position: absolute;
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 6px 0;
    width: 230px;
    display: none;
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.18);
    z-index: 10000;
}

.route-popup.show {
    display: block;
}

.route-item {
    display: block;
    padding: 6px 14px;
    font-size: 0.88rem;
    text-decoration: none;
    color: var(--text);
    white-space: nowrap;
}

.route-item:hover {
    background: var(--panel-2);
}
